{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useEffect, useState } from 'react';\nimport { Pagination } from 'antd';\nimport Product from '~/components/elements/products/Product';\nimport ProductWide from '~/components/elements/products/ProductWide';\nimport ProductRepository from '~/repositories/ProductRepository';\nimport ModuleShopSortBy from '~/components/partials/shop/modules/ModuleShopSortBy';\nimport { useRouter } from 'next/router';\nimport { generateTempArray } from '~/utilities/common-helpers';\nimport SkeletonProduct from '~/components/elements/skeletons/SkeletonProduct';\n\nconst ShopItems = ({\n  columns = 4,\n  pageSize = 12\n}) => {\n  const Router = useRouter();\n  const {\n    page\n  } = Router.query;\n  const {\n    query\n  } = Router;\n  const {\n    0: listView,\n    1: setListView\n  } = useState(true);\n  const {\n    0: productItems,\n    1: setProductItems\n  } = useState(null);\n  const {\n    0: total,\n    1: setTotal\n  } = useState(0);\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n  const {\n    0: classes,\n    1: setClasses\n  } = useState('col-xl-4 col-lg-4 col-md-3 col-sm-6 col-6');\n\n  function handleChangeViewMode(e) {\n    e.preventDefault();\n    setListView(!listView);\n  }\n\n  async function getProducts(params) {\n    setLoading(true);\n    const responseData = await ProductRepository.getProducts(params);\n\n    if (responseData) {\n      setProductItems(responseData.items);\n      setTimeout(function () {\n        setLoading(false);\n      }.bind(this), 250);\n    }\n  }\n\n  function handlePagination(page, pageSize) {\n    Router.push(`/shop?page=${page}`);\n  }\n\n  async function getTotalRecords(params) {\n    const responseData = await ProductRepository.getTotalRecords();\n\n    if (responseData) {\n      setTotal(responseData);\n    }\n  }\n\n  function handleSetColumns() {\n    switch (columns) {\n      case 2:\n        setClasses('col-xl-6 col-lg-6 col-md-6 col-sm-6 col-6');\n        return 3;\n        break;\n\n      case 4:\n        setClasses('col-xl-3 col-lg-4 col-md-6 col-sm-6 col-6');\n        return 4;\n        break;\n\n      case 6:\n        setClasses('col-xl-2 col-lg-4 col-md-6 col-sm-6 col-6');\n        return 6;\n        break;\n\n      default:\n        setClasses('col-xl-4 col-lg-4 col-md-3 col-sm-6 col-6');\n    }\n  }\n\n  useEffect(() => {\n    let params;\n\n    if (query) {\n      if (query.page) {\n        params = {\n          _start: page * pageSize,\n          _limit: pageSize\n        };\n      } else {\n        params = query;\n        params._limit = pageSize;\n      }\n    } else {\n      params = {\n        _limit: pageSize\n      };\n    }\n\n    getTotalRecords();\n    getProducts(params);\n    handleSetColumns();\n  }, [query]); // Views\n\n  let productItemsView;\n\n  if (!loading) {\n    if (productItems && productItems.length > 0) {\n      if (listView) {\n        const items = productItems.map(item => /*#__PURE__*/_jsx(\"div\", {\n          className: classes,\n          children: /*#__PURE__*/_jsx(Product, {\n            product: item\n          })\n        }, item.id));\n        productItemsView = /*#__PURE__*/_jsx(\"div\", {\n          className: \"ps-shop-items\",\n          children: /*#__PURE__*/_jsx(\"div\", {\n            className: \"row\",\n            children: items\n          })\n        });\n      } else {\n        productItemsView = productItems.map(item => /*#__PURE__*/_jsx(ProductWide, {\n          product: item\n        }));\n      }\n    } else {\n      productItemsView = /*#__PURE__*/_jsx(\"p\", {\n        children: \"No product found.\"\n      });\n    }\n  } else {\n    const skeletonItems = generateTempArray(12).map(item => /*#__PURE__*/_jsx(\"div\", {\n      className: classes,\n      children: /*#__PURE__*/_jsx(SkeletonProduct, {})\n    }, item));\n    productItemsView = /*#__PURE__*/_jsx(\"div\", {\n      className: \"row\",\n      children: skeletonItems\n    });\n  }\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: \"ps-shopping\",\n    children: [/*#__PURE__*/_jsxs(\"div\", {\n      className: \"ps-shopping__header\",\n      children: [/*#__PURE__*/_jsxs(\"p\", {\n        children: [/*#__PURE__*/_jsx(\"strong\", {\n          className: \"mr-2\",\n          children: total\n        }), \"Products found\"]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \"ps-shopping__actions\",\n        children: [/*#__PURE__*/_jsx(ModuleShopSortBy, {}), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"ps-shopping__view\",\n          children: [/*#__PURE__*/_jsx(\"p\", {\n            children: \"View\"\n          }), /*#__PURE__*/_jsxs(\"ul\", {\n            className: \"ps-tab-list\",\n            children: [/*#__PURE__*/_jsx(\"li\", {\n              className: listView === true ? 'active' : '',\n              children: /*#__PURE__*/_jsx(\"a\", {\n                href: \"#\",\n                onClick: e => handleChangeViewMode(e),\n                children: /*#__PURE__*/_jsx(\"i\", {\n                  className: \"icon-grid\"\n                })\n              })\n            }), /*#__PURE__*/_jsx(\"li\", {\n              className: listView !== true ? 'active' : '',\n              children: /*#__PURE__*/_jsx(\"a\", {\n                href: \"#\",\n                onClick: e => handleChangeViewMode(e),\n                children: /*#__PURE__*/_jsx(\"i\", {\n                  className: \"icon-list4\"\n                })\n              })\n            })]\n          })]\n        })]\n      })]\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: \"ps-shopping__content\",\n      children: productItemsView\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: \"ps-shopping__footer text-center\",\n      children: /*#__PURE__*/_jsx(\"div\", {\n        className: \"ps-pagination\",\n        children: /*#__PURE__*/_jsx(Pagination, {\n          total: total - 1,\n          pageSize: pageSize,\n          responsive: true,\n          showSizeChanger: false,\n          current: page !== undefined ? parseInt(page) : 1,\n          onChange: e => handlePagination(e)\n        })\n      })\n    })]\n  });\n};\n\nexport default ShopItems;","map":null,"metadata":{},"sourceType":"module"}